import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { github, vsDark, nightOwl } from "@code-surfer/themes";

export const theme = vsDark;

# React vs. Svelte

## Mission: Compare modern JavaScript frameworks
### (What we use vs. What we could use)
## ğŸš€ğŸ‘©â€ğŸš€ Discovery Day v3 ğŸ‘¨â€ğŸš€ğŸš€

---

# Frameworks

## They help us focus on the important problems at hand

## and avoid problems that have already been solved. âœ…

---

# DOM

## Document Object Model

### Think of...

### A ğŸŒ³ of everything that you experience in a web application
---

# State management

## Managing the state of user interface elements

### Think of...
#### When you update your avatar with your amazing new headshot âœ¨...
#### State changes and the UI must reflect this update.
#### Default photo ğŸ‘‰ Personalized photo
---

# Strengths of React

- Component-based so code is reusable and logic is isolated to where it matters

- Virtual DOM (framework reconciles old state vs. new state)

- Optimized by opting out of these updates

- Supports accessibility through existing web standards

---

# Strengths Svelte

- Also component-based so we get the same advantages

- No virtual DOM

- Fast because it directly manipulates the DOM, ex. ğŸ”ğŸŸ 

- Built in warnings that guide you in building accessible apps

---
# Some quick code samples

---

<CodeSurferColumns themes={[vsDark, nightOwl]}>

<Step>

```js title="React"
import React, { useState } from "react"

const Counter = () => {
  const [count, setCount] = useState(0);

  const handleClick = () => {
    setCount(count + 1)
  }

  return <button onClick={handleClick}>
	          Clicked {count} {count === 1 ? 'time' : 'times'}
         </button>
}

export default Counter;
```

```js title="Svelte"
<script>
	let count = 0;

	function handleClick() {
		count += 1;
	}
</script>

<button on:click={handleClick}>
	Clicked {count} {count === 1 ? 'time' : 'times'}
</button>
```

</Step>

<Step>

```js 4:5 title="Handle state the React way"
import React, { useState } from "react"

const Counter = () => {
  // Declare a state variable (count) and an update function (setCount) and set an initial value
  const [count, setCount] = useState(0);

  const handleClick = () => {
    setCount(count + 1)
  }

  return <button onClick={handleClick}>
	          Clicked {count} {count === 1 ? 'time' : 'times'}
         </button>
}

export default Counter;
```

```js 2:5 title="Handle state the Svelte way"
<script>
    // Declare a variable and assign an initial value
    // Re-assign to update state
    // Less complex ğŸ‘
	let count = 0;

	function handleClick() {
		count += 1;
	}
</script>

<button on:click={handleClick}>
	Clicked {count} {count === 1 ? 'time' : 'times'}
</button>
```

</Step>

<Step>

```js 4:9 title="Asynchronous data fetch the React way"
const { loading, error, data } = useQuery(crashQuery)

return <div>
          // Render view conditionally
          // Easy to get lost in the logical flow
          {loading && <Spinner />}
          {!!data.atd_txdot_crashes && 
          data.atd_txdot_crashes.map((crash) => <div>{crash.crash_id}</div>)}
          {error && <div>Error: {error}</div>}
       </div>   
```

```js 5:16 title="Asynchronous data fetch the Svelte way"
<script>
	const crashes = query(client, { query: crashQuery });
</script>

<!-- Await block -->
<!-- Mixes response handling with display logic ğŸ™Œ -->
<!-- More readable line-by-line -->
  {#await $crashes}
    <Spinner />
  {:then result}
    {#each result.data.atd_txdot_crashes as crash}
      <div>{crash.crash_id}
    {/each}
  {:catch error}
    Error: {error}
  {/await}
```

</Step>

</CodeSurferColumns>

---

# What I learned about Svelte
- Fast development
- More readable code
- Built-in cues for accessibility
- Wanted to keep going but ran out of time (good sign)

---

# Hard things about Svelte
- It is pretty new so troubleshooting can be frustrating
- Logical blocks and directives have a learning curve
- React patterns like props and components can lead to a false sense of understanding

---

# [Demo](http://localhost:5000/) of Svelte app
## Using Vision Zero Database developed for the Vision Zero Team (test environment)


